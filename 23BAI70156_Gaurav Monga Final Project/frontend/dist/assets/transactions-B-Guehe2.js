import{r,j as a,C as S,H as m,I as T,e as y,f as I,_ as N}from"./index-D5Dl40EV.js";import{A as C}from"./adminService-yn0D8as4.js";import{u as P,S as E,P as v}from"./pageInfo-B3MYH2a5.js";function H(){const[s,t]=r.useState([]),[i,c]=r.useState(!0),{pageSize:d,pageNumber:n,noOfPages:l,searchKey:o,onNextClick:h,onPrevClick:x,setNoOfPages:j,setNoOfRecords:g,setSearchKey:u,getPageInfo:f}=P(),p=async()=>{await C.getAllTransactions(n,d,o).then(e=>{if(e.data.status==="SUCCESS"){t(e.data.response.data),j(e.data.response.totalNoOfPages),g(e.data.response.totalNoOfRecords);return}},e=>{N.error("Failed to fetch all transactions: Try again later!")}),c(!1)};return r.useEffect(()=>{p()},[o,n]),a.jsxs(S,{activeNavId:4,children:[a.jsx(m,{title:"Transactions"}),a.jsx(T,{}),i&&a.jsx(y,{}),!i&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"utils page",children:[a.jsx(E,{onChange:e=>u(e),placeholder:"Search transactions"}),a.jsx(v,{info:f(),onPrevClick:x,onNextClick:h,pageNumber:n,noOfPages:l})]}),s.length===0&&a.jsx(I,{text:"No transactions found!"}),s.length!==0&&a.jsxs("table",{children:[a.jsx(A,{}),a.jsx(D,{data:s})]})]})]})}function A(){return a.jsxs("tr",{children:[a.jsx("th",{children:"Transaction Id"})," ",a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Description"})," ",a.jsx("th",{children:"Amount"}),a.jsx("th",{children:"Category"})," ",a.jsx("th",{children:"Date"})]})}function D({data:s}){return s.map(t=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{children:"T"+String(t.transactionId).padStart(5,"0")})}),a.jsx("td",{children:t.userEmail}),a.jsx("td",{children:t.description||"-"}),a.jsxs("td",{children:[t.transactionType===1?"- ":"+ ",t.amount]}),a.jsx("td",{children:t.categoryName}),a.jsx("td",{children:new Date(t.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"2-digit"})})]},t.transactionId))}export{H as default};
