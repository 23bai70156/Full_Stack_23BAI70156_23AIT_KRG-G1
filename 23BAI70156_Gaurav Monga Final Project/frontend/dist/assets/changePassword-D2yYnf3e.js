import{u as x,c as j,b as f,r as o,j as s,A as b}from"./index-D5Dl40EV.js";function S(){const u=x(),{email:p}=j(),{register:n,handleSubmit:m,watch:w,formState:a}=f(),i=o.useRef({});i.current=w("password","");const[d,r]=o.useState(""),[l,c]=o.useState(!1),h=async t=>{c(!0),await b.resetPassword(p,t.password).then(e=>{console.log(e),e.data.status==="SUCCESS"?(r(""),u("/auth/login")):r("Reset password failed: Something went wrong!")},e=>{if(e.response){const g=e.response.data.response;r(g),console.log(e.response)}else r("Reset password failed: Something went wrong!")}),c(!1)};return s.jsx("div",{className:"container",children:s.jsxs("form",{className:"auth-form",onSubmit:m(h),children:[s.jsx("h2",{children:"Change password"}),d!==""&&s.jsx("p",{children:d}),s.jsxs("div",{className:"input-box",children:[s.jsx("label",{children:"Password"}),s.jsx("br",{}),s.jsx("input",{type:"password",...n("password",{required:"Password is required!",minLength:{value:8,message:"Password must have atleast 8 characters"}})}),a.errors.password&&s.jsx("small",{children:a.errors.password.message})]}),s.jsxs("div",{className:"input-box",children:[s.jsx("label",{children:"Confirm Password"}),s.jsx("br",{}),s.jsx("input",{type:"password",...n("cpassword",{required:"Confirm password is required!",minLength:{value:8,message:"Password must have atleast 8 characters"},validate:t=>t===i.current||"Passwords do not match!"})}),a.errors.cpassword&&s.jsx("small",{children:a.errors.cpassword.message})]}),s.jsx("div",{className:"input-box",children:s.jsx("input",{type:"submit",value:l?"Please wait":"Change password",className:l?"button button-fill loading":"button button-fill"})})]})})}export{S as default};
