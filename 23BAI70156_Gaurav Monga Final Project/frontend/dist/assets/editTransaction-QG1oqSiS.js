import{c as j,r as a,d as v,u as F,j as s,C as I,H as U,e as _,f as D,T as w,U as u,_ as n,A as N}from"./index-D5Dl40EV.js";import{T as A}from"./transactionForm-CEs42kiB.js";const H=[{id:1,name:"Expense"},{id:2,name:"Income"}];function P(){const{transactionId:i}=j(),[o,S]=a.useState({}),[r,c]=v(),[T,m]=a.useState([]),[d,l]=a.useState(1),[x,f]=a.useState(!1),[y,p]=a.useState(!1),g=F();a.useEffect(()=>{m(r.filter(t=>t.transactionType.transactionTypeId===d))},[r,d]);async function C(){await u.get_single_transaction(i).then(t=>{t.data.status==="SUCCESS"&&S(t.data.response)},t=>{t.response?n.error(t.response.data.response):n.error("Failed to fetch transaction information: Try again later!")})}a.useEffect(()=>{C()},[i]),a.useEffect(()=>{l(o.transactionType)},[o]);const E=async t=>{f(!0),await u.update_transaction(i,N.getCurrentUser().email,t.category,t.description,t.amount,t.date).then(e=>{if(e.data.status==="SUCCESS"){g("/user/transactions",{state:{text:e.data.response}});return}},e=>{e.response?n.error(e.response.data.response):n.error("Failed to edit transaction information: Try again later!")}),f(!1)},h=async t=>{p(!0),await u.delete_transaction(t).then(e=>{e.data.status==="SUCCESS"&&g("/user/transactions",{state:{text:e.data.response}})},e=>{e.response?n.error(e.response.data.response):n.error("Failed to delete transaction: Try again later!")}),p(!1)};return s.jsxs(I,{activeNavId:1,children:[s.jsx(U,{title:"Edit Transaction"}),c&&s.jsx(_,{}),!c&&r.length===0&&s.jsx(D,{text:"No data found!"}),!c&&r.length!==0&&s.jsxs(s.Fragment,{children:[s.jsx(w,{transactionTypes:H,setTransactionType:l,activeTransactionType:d}),s.jsx(A,{categories:T,onSubmit:E,isDeleting:y,isSaving:x,transaction:o,onDelete:h})]})]})}export{P as default};
