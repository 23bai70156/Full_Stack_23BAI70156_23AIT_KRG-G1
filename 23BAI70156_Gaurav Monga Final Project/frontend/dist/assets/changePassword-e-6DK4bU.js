import{l as x,j as s,e as w,m as g,b as j,r as p,U as f,_ as h}from"./index-D5Dl40EV.js";function b({username:l,email:t}){const[r,c,u,e]=x(),i=async o=>{const a=o.target.files[0],m=10*1024*1024;a&&a.size>m||await u(a)};return s.jsx("div",{className:"profile",style:{maxWidth:"400px",flexDirection:"column",justifyContent:"center",padding:"25px"},children:c?s.jsx(w,{}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"profile-img",children:[!r&&s.jsx("img",{src:g,width:140,height:140,alt:"user"}),r&&s.jsx("img",{src:r,width:140,height:140,alt:"user"}),s.jsxs("div",{className:"action",children:[r&&s.jsx("label",{onClick:e,children:"Remove image"}),s.jsxs("label",{children:["Change image",s.jsx("input",{type:"file",onChange:i,accept:".jpg, .jpeg, .png"})]})]})]}),s.jsxs("div",{style:{alignItems:"center"},children:[s.jsx("h3",{style:{color:"var(--text)"},children:l}),s.jsx("p",{children:t})]})]})})}function v({email:l}){const{register:t,handleSubmit:r,watch:c,reset:u,formState:e}=j(),i=p.useRef({});i.current=c("newPassword","");const[o,a]=p.useState(!1),m=async d=>{a(!0),await f.settingsResetPassword(l,d.currentPassword,d.newPassword).then(n=>{if(n.data.status==="SUCCESS"){h.success(n.data.response),u({currentPassword:"",newPassword:"",cpassword:""});return}},n=>{n.response?h.error(n.response.data.response):h.error("Failed to change password: Try again later!")}),a(!1)};return s.jsxs("form",{className:"auth-form t-form",onSubmit:r(m),children:[s.jsxs("div",{className:"input-box",children:[s.jsx("label",{children:"Current Password"}),s.jsx("br",{}),s.jsx("input",{type:"password",...t("currentPassword",{required:"Current password is required!",minLength:{value:8,message:"Password must have atleast 8 characters"}})}),e.errors.currentPassword&&s.jsx("small",{children:e.errors.currentPassword.message})]}),s.jsxs("div",{className:"input-box",children:[s.jsx("label",{children:"Password"}),s.jsx("br",{}),s.jsx("input",{type:"password",...t("newPassword",{required:"Password is required!",minLength:{value:8,message:"Password must have atleast 8 characters"}})}),e.errors.newPassword&&s.jsx("small",{children:e.errors.newPassword.message})]}),s.jsxs("div",{className:"input-box",children:[s.jsx("label",{children:"Confirm Password"}),s.jsx("br",{}),s.jsx("input",{type:"password",...t("cpassword",{required:"Confirm password is required!",minLength:{value:8,message:"Password must have atleast 8 characters"},validate:d=>d===i.current||"Passwords do not match!"})}),e.errors.cpassword&&s.jsx("small",{children:e.errors.cpassword.message})]}),s.jsx("div",{className:"t-btn input-box",children:s.jsx("input",{type:"submit",value:o?"Updating...":"Update password",className:o?"button button-fill loading":"button button-fill"})})]})}export{v as C,b as P};
