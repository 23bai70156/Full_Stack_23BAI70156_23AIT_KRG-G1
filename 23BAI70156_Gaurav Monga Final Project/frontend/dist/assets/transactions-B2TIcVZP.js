import{j as e,a as I,r,h as C,_ as h,C as F,H as P,I as E,e as O,f as U,U as w,A as D}from"./index-D5Dl40EV.js";import"./message-CqmnSJxq.js";import{u as L,S as k,P as R}from"./pageInfo-B3MYH2a5.js";/* empty css                        */function b({list:s}){return e.jsx(e.Fragment,{children:Object.keys(s).map(t=>e.jsxs("div",{className:"t-box",children:[e.jsx("div",{className:"date",children:A(t)}),e.jsx("div",{className:"t-list",children:s[t].map(a=>e.jsxs(I,{to:`/user/editTransaction/${a.transactionId}`,className:"t-row",children:[e.jsxs("div",{className:"t-row-left",children:[e.jsx("p",{children:a.categoryName}),e.jsx("p",{children:a.description})]}),e.jsx("div",{className:"t-row-right",children:e.jsxs("p",{children:[" ",a.transactionType===1?"- ":"+ ","Rs. ",a.amount]})})]},a.transactionId))})]},t))})}function A(s){if(["Today","Yesterday"].includes(s))return s;const t=new Date(s),a=t.getFullYear(),o=t.toLocaleDateString("en-US",{month:"long"});return t.getDate()+" "+o+" "+a}function $(){const[s,t]=r.useState([]),[a,o]=r.useState(!0),[i,g]=r.useState(""),c=C(),{pageSize:j,pageNumber:l,noOfPages:m,sortField:d,sortDirec:u,searchKey:x,onNextClick:f,onPrevClick:p,setNoOfPages:N,setNoOfRecords:v,setSearchKey:y,getPageInfo:T}=L("date"),S=async()=>{await w.get_transactions(D.getCurrentUser().email,l,j,x,d,u,i).then(n=>{if(n.data.status==="SUCCESS"){t(n.data.response.data),N(n.data.response.totalNoOfPages),v(n.data.response.totalNoOfRecords);return}},n=>{h.error("Failed to fetch all transactions: Try again later!")}),o(!1)};return r.useEffect(()=>{S()},[l,x,i,u,d]),r.useEffect(()=>{c.state&&h.success(c.state.text),c.state=null},[]),e.jsxs(F,{activeNavId:1,children:[e.jsx(P,{title:"Transactions History"}),e.jsx(E,{}),s.length===0&&a&&e.jsx(O,{}),!a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"utils",children:[e.jsx(H,{setTransactionType:n=>g(n)}),e.jsxs("div",{className:"page",children:[e.jsx(k,{onChange:n=>y(n),placeholder:"Search transactions"}),e.jsx(R,{info:T(),onPrevClick:p,onNextClick:f,pageNumber:l,noOfPages:m})]})]}),s.length===0&&e.jsx(U,{text:"No transactions found!"}),s.length!==0&&e.jsx(b,{list:s})]})]})}function H({setTransactionType:s}){return e.jsxs("select",{onChange:t=>s(t.target.value),style:{margin:"0 15px 0 0"},children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"expense",children:"Expense"}),e.jsx("option",{value:"income",children:"Income"})]})}export{$ as default};
