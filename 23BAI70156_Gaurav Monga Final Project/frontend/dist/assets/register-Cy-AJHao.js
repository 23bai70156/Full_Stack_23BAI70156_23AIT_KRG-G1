import{u as h,b as j,r as n,j as s,L as w,a as b,A as v}from"./index-D5Dl40EV.js";function y(){const m=h(),{register:i,handleSubmit:u,watch:x,formState:e}=j(),o=n.useRef({});o.current=x("password","");const[l,t]=n.useState(""),[d,c]=n.useState(!1),p=async r=>{c(!0),await v.register_req(r.username,r.email,r.password).then(a=>{console.log(a),a.data.status==="SUCCESS"?(t(""),m(`/auth/userRegistrationVerfication/${r.email}`)):t("Registration failed: Something went wrong!")},a=>{if(a.response){const g=a.response.data.response;t(g),console.log(a.response.data)}else t("Registration failed: Something went wrong!")}),c(!1)};return s.jsx("div",{className:"container",children:s.jsxs("form",{className:"auth-form",onSubmit:u(p),children:[s.jsx(w,{}),s.jsx("h2",{children:"Register"}),l!==""&&s.jsx("p",{children:l}),s.jsxs("div",{className:"input-box",children:[s.jsx("label",{children:"Username"}),s.jsx("br",{}),s.jsx("input",{type:"text",...i("username",{required:"Username is required!"})}),e.errors.username&&s.jsx("small",{children:e.errors.username.message})]}),s.jsxs("div",{className:"input-box",children:[s.jsx("label",{children:"Email"}),s.jsx("br",{}),s.jsx("input",{type:"text",...i("email",{required:"Email is required!",pattern:{value:/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/g,message:"Invalid email address!"}})}),e.errors.email&&s.jsx("small",{children:e.errors.email.message})]}),s.jsxs("div",{className:"input-box",children:[s.jsx("label",{children:"Password"}),s.jsx("br",{}),s.jsx("input",{type:"password",...i("password",{required:"Password is required!",minLength:{value:8,message:"Password must have atleast 8 characters"}})}),e.errors.password&&s.jsx("small",{children:e.errors.password.message})]}),s.jsxs("div",{className:"input-box",children:[s.jsx("label",{children:"Confirm Password"}),s.jsx("br",{}),s.jsx("input",{type:"password",...i("cpassword",{required:"Confirm password is required!",minLength:{value:8,message:"Password must have atleast 8 characters"},validate:r=>r===o.current||"Passwords do not match!"})}),e.errors.cpassword&&s.jsx("small",{children:e.errors.cpassword.message})]}),s.jsx("div",{className:"input-box",children:s.jsx("input",{type:"submit",value:d?"Please wait":"Register",className:d?"button button-fill loading":"button button-fill"})}),s.jsx("br",{}),s.jsx("div",{className:"msg",children:"By clicking Register, you are agree to our user agreement, privacy policy, and cookie policy."}),s.jsx("br",{}),s.jsxs("div",{className:"msg",children:["Already a member? ",s.jsx(b,{to:"/auth/login",className:"inline-link",children:"Login Here"})]})]})})}export{y as default};
