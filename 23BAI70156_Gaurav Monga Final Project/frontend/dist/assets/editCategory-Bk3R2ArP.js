import{c as g,b as x,r as d,u as y,_ as n,j as e,C as j,H as h,I as b,a as f}from"./index-D5Dl40EV.js";import{A as v}from"./adminService-yn0D8as4.js";function I(){const{categoryId:s}=g(),{register:r,handleSubmit:m,reset:o,formState:t}=x(),[c,l]=d.useState(!1),u=y();d.useEffect(()=>{const a=JSON.parse(localStorage.getItem("categoryToEdit"));a.categoryId==s?o({cname:a.categoryName,type:String(a.transactionType.transactionTypeId)}):n.error("Faild to fetch category information!"),localStorage.removeItem("categoryToEdit")},[o,s]);const p=async a=>{l(!0),await v.updatecategory(s,a.cname,a.type).then(i=>{i.data.status==="SUCCESS"&&u("/admin/categories")},i=>{i.response?n.error("Failed to update category: Try again later!"):n.error("Failed to update category: Try again later!")}),l(!1)};return e.jsxs(j,{activeNavId:6,children:[e.jsx(h,{title:"Edit category"}),e.jsx(b,{}),e.jsxs("form",{className:"auth-form t-form",onSubmit:m(p),style:{marginTop:"25px"},children:[e.jsxs("div",{className:"input-box",children:[e.jsx("label",{children:"Category name"}),e.jsx("br",{}),e.jsx("input",{type:"text",...r("cname",{required:"Category name is required!",maxLength:{value:30,message:"Category name can have atmost 30 characters!"}})}),t.errors.cname&&e.jsx("small",{children:t.errors.cname.message})]}),e.jsxs("div",{className:"input-box",children:[e.jsx("label",{children:"Transaction type"}),e.jsx("br",{}),e.jsxs("div",{className:"radio",children:[e.jsx("span",{children:e.jsxs("label",{children:[e.jsx("input",{type:"radio",id:1,value:1,...r("type",{required:"Transaction type is required!"})}),"Expense"]})}),e.jsx("span",{children:e.jsxs("label",{children:[e.jsx("input",{type:"radio",id:2,value:2,...r("type",{required:"Transaction type is required!"})}),"Income"]})})]}),t.errors.type&&e.jsx("small",{children:t.errors.type.message})]}),e.jsxs("div",{className:"input-box",children:[e.jsx("input",{type:"submit",value:c?"Saving...":"Save category",className:c?"button button-fill loading":"button button-fill"}),e.jsx(f,{to:"/admin/categories",className:"button outline",children:e.jsx("span",{children:"Cancel"})})]})]})]})}export{I as default};
