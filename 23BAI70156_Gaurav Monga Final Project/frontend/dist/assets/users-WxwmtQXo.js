import{r as l,j as e,C as U,H as T,I as m,e as E,f as N,_ as n}from"./index-D5Dl40EV.js";import{A as c}from"./adminService-yn0D8as4.js";import{u as I,S as P,P as F}from"./pageInfo-B3MYH2a5.js";function w(){const[r,t]=l.useState([]),[s,h]=l.useState(!0),{pageSize:x,pageNumber:o,noOfPages:j,searchKey:d,onNextClick:u,onPrevClick:f,setNoOfPages:g,setNoOfRecords:S,setSearchKey:b,getPageInfo:p}=I(),y=async()=>{await c.getAllUsers(o,x,d).then(a=>{if(a.data.status==="SUCCESS"){t(a.data.response.data),g(a.data.response.totalNoOfPages),S(a.data.response.totalNoOfRecords);return}n.error("Failed to fetch all users: Try again later!")},a=>{n.error("Failed to fetch all users: Try again later!")}),h(!1)},C=async a=>{await c.disableOrEnableUser(a).then(i=>{if(i.data.status==="SUCCESS"){window.location.reload();return}n.error("Failed to update user: Try again later!")},i=>{n.error("Failed to update user: Try again later!")})};return l.useEffect(()=>{y()},[d,o]),e.jsxs(U,{activeNavId:5,children:[e.jsx(T,{title:"Users"}),e.jsx(m,{}),s&&e.jsx(E,{}),!s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"utils page",children:[e.jsx(P,{onChange:a=>b(a),placeholder:"Search users"}),e.jsx(F,{info:p(),onPrevClick:f,onNextClick:u,pageNumber:o,noOfPages:j})]}),r.length===0&&e.jsx(N,{text:"No transactions found!"}),r.length!==0&&e.jsxs("table",{children:[e.jsx(O,{}),e.jsx(R,{data:r,disableOrEnable:C})]})]})]})}function O(){return e.jsxs("tr",{children:[e.jsx("th",{children:"User Id"})," ",e.jsx("th",{children:"Username"})," ",e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Tot. Expense(Rs.)"})," ",e.jsx("th",{children:"Tot. Income(Rs.)"}),e.jsx("th",{children:"Tot. No. Transactions"})," ",e.jsx("th",{children:"Status"})," ",e.jsx("th",{children:"Action"})]})}function R({data:r,disableOrEnable:t}){return r.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:"U"+String(s.id).padStart(5,"0")}),e.jsx("td",{children:s.username}),e.jsx("td",{children:s.email}),e.jsxs("td",{children:["Rs. ",s.expense||0]}),e.jsxs("td",{children:["Rs. ",s.income||0]}),e.jsx("td",{children:s.noOfTransactions||0}),s.enabled?e.jsx("td",{style:{color:"#6aa412"},children:"Enabled"}):e.jsx("td",{style:{color:"#ff0000"},children:"Disabled"}),e.jsx("td",{children:s.enabled?e.jsx("button",{onClick:()=>t(s.id),style:{backgroundColor:"#ff0000"},children:"Disable"}):e.jsx("button",{onClick:()=>t(s.id),style:{backgroundColor:"#6aa412"},children:"Enable"})})]},s.id))}export{w as default};
