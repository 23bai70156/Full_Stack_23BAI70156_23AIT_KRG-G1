import{u as S,c as b,b as v,r,j as e,A as g}from"./index-D5Dl40EV.js";function y(){const f=S(),{email:a}=b(),{register:u,handleSubmit:h,formState:l}=v(),[n,t]=r.useState(""),[o,c]=r.useState(!1),[x,d]=r.useState(!1),p=async s=>{c(!0),await g.forgotPasswordverifyCode(s.code).then(i=>{console.log(i.data.message),i.data.status==="SUCCESS"?(t(""),f(`/auth/forgotPassword/resetPassword/${a}`)):t("Verification failed: Something went wrong!")},i=>{if(i.response){const m=i.response.data.response;t(m),console.log(m)}else console.log(i.message),t("Verification failed: Something went wrong!")}),c(!1)},j=async()=>{t(""),d(!0),await g.resendResetPasswordVerificationCode(a).then(s=>{console.log(s.data),s.data.status==="SUCCESS"?(console.log(s.data),t("")):t("Verification failed: Cannot resend email!")},s=>{if(s.response){const i=s.response.data.response;t(i),console.log(s)}else console.log(s),t("Verification failed: Cannot resend email!")}),d(!1)};return e.jsx("div",{className:"container",children:e.jsxs("form",{className:"auth-form",onSubmit:h(p),children:[e.jsx("h2",{children:"Verify your email"}),e.jsx("br",{}),x?e.jsxs("div",{className:"msg",children:["Sending email to ",a,"..."]}):n===""?e.jsxs("div",{className:"msg",children:["The verification code has been sent to ",e.jsx("span",{style:{fontWeight:600,color:"green"},children:a}),"."]}):e.jsx(e.Fragment,{}),n!==""&&e.jsx("p",{children:n}),e.jsxs("div",{className:"input-box",children:[e.jsx("input",{placeholder:"Enter verification code",type:"text",...u("code",{required:"Code is required!"})}),l.errors.code&&e.jsx("small",{children:l.errors.code.message})]}),e.jsx("div",{className:"msg",style:{fontWeight:600,fontStyle:"italic"},children:"Please not that the verification code will be expired with in 15 minutes!"}),e.jsx("br",{}),e.jsx("div",{className:"input-box",children:e.jsx("input",{type:"submit",value:o?"Verifying":"Verify",className:o?"button button-fill loading":"button button-fill"})}),e.jsx("br",{}),e.jsxs("div",{className:"msg",children:["Having problems? ",e.jsx("span",{style:{cursor:"pointer"},onClick:j,className:"inline-link",children:o?"Sending code":"Resend code"})]})]})})}export{y as default};
