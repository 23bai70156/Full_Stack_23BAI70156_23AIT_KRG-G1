import{d as T,r as n,u as f,j as e,C as m,H as S,I as j,e as v,f as y,T as C,U as h,A as I,_ as c}from"./index-D5Dl40EV.js";import{T as E}from"./transactionForm-CEs42kiB.js";import"./message-CqmnSJxq.js";const F=[{id:1,name:"Expense"},{id:2,name:"Income"}];function _(){const[s,r]=T(),[d,p]=n.useState([]),[i,u]=n.useState(1),[g,o]=n.useState(!1),l=f();n.useEffect(()=>{p(s.filter(t=>t.transactionType.transactionTypeId===i))},[s,i]);const x=async t=>{o(!0),await h.add_transaction(I.getCurrentUser().email,t.category,t.description,t.amount,t.date).then(a=>{a.data.status==="SUCCESS"&&l("/user/transactions",{state:{text:a.data.response}})},a=>{a.response?c.error(a.response.data.response):c.error("Failed to add transaction: Try again later!")}),o(!1)};return e.jsxs(m,{activeNavId:2,children:[e.jsx(S,{title:"New Transaction"}),e.jsx(j,{}),r&&e.jsx(v,{}),!r&&s.length===0&&e.jsx(y,{text:"No data found!"}),!r&&s.length!==0&&e.jsxs(e.Fragment,{children:[e.jsx(C,{transactionTypes:F,setTransactionType:u,activeTransactionType:i}),e.jsx(E,{categories:d,onSubmit:x,isSaving:g})]})]})}export{_ as default};
