import{u as b,c as v,b as S,r,j as e,A as m}from"./index-D5Dl40EV.js";const N=()=>{const u=b(),{email:n}=v(),{register:g,handleSubmit:f,formState:l}=S(),[a,i]=r.useState(""),[o,c]=r.useState(!1),[h,d]=r.useState(!1),x=async t=>{c(!0),await m.verifyRegistrationVerificationCode(t.code).then(s=>{console.log(s.data),s.data.status==="SUCCESS"?(console.log(s.data),u("/auth/success-registration"),i("")):i("Verification failed: Cannot resend email!")},s=>{if(s.response){const p=s.response.data.response;i(p),console.log(s)}else console.log(s),i("Verification failed: Cannot resend email!")}),c(!1)},j=async()=>{d(!0),await m.resendRegistrationVerificationCode(n).then(t=>{console.log(t.data.message),i("")},t=>{i("cannot send email again!")}),d(!1)};return e.jsx("div",{className:"container",children:e.jsxs("form",{className:"auth-form",onSubmit:f(x),children:[e.jsx("h2",{children:"Verify your email"}),e.jsx("br",{}),h?e.jsxs("div",{className:"msg",children:["Sending email to ",n,"..."]}):a===""?e.jsxs("div",{className:"msg",children:["The verification code has been sent to ",e.jsx("span",{style:{fontWeight:600,color:"green"},children:n}),"."]}):e.jsx(e.Fragment,{}),a!==""&&e.jsx("p",{children:a}),e.jsxs("div",{className:"input-box",children:[e.jsx("input",{placeholder:"Enter verification code",type:"text",...g("code",{required:"Code is required!"})}),l.errors.code&&e.jsx("small",{children:l.errors.code.message})]}),e.jsx("div",{className:"msg",style:{fontWeight:600,fontStyle:"italic"},children:"Please not that the verification code will be expired with in 15 minutes!"}),e.jsx("br",{}),e.jsx("div",{className:"input-box",children:e.jsx("input",{type:"submit",value:o?"Verifying":"Verify",className:o?"button button-fill loading":"button button-fill"})}),e.jsx("br",{}),e.jsxs("div",{className:"msg",children:["Having problems? ",e.jsx("span",{style:{cursor:"pointer"},onClick:j,className:"inline-link",children:o?"Sending code":"Resend code"})]})]})})};export{N as default};
